<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Akun Saya</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100">

<script src="assets/js/guard.js"></script>
<script src="assets/js/navbar.js"></script>

<div class="max-w-4xl mx-auto p-6 mt-6">
  <h1 class="text-2xl font-semibold mb-6">Akun Saya</h1>

  <div class="bg-white p-6 rounded shadow space-y-6">

    <!-- INFO UMUM -->
    <div>
      <p class="text-sm text-gray-500">Email</p>
      <p id="emailDisplay" class="font-medium"></p>
    </div>

    <div>
      <p class="text-sm text-gray-500">Role</p>
      <p id="roleDisplay" class="font-medium capitalize"></p>
    </div>

    <!-- ADMIN SECTION -->
    <div id="adminSection" class="hidden space-y-4 border-t pt-4">

      <h2 class="text-lg font-semibold">Statistik Admin</h2>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">

        <div class="bg-gray-100 p-4 rounded">
          <p class="text-sm text-gray-500">Total User</p>
          <p id="totalUser" class="text-xl font-semibold">0</p>
        </div>

        <div class="bg-gray-100 p-4 rounded">
          <p class="text-sm text-gray-500">Total Materi</p>
          <p id="totalMateri" class="text-xl font-semibold">0</p>
        </div>

        <div class="bg-gray-100 p-4 rounded">
          <p class="text-sm text-gray-500">Total Presensi</p>
          <p id="totalPresensi" class="text-xl font-semibold">0</p>
        </div>

      </div>
    </div>

    <!-- ACTION BUTTONS -->
    <div class="flex gap-3 pt-4 border-t">
      <button id="editProfileBtn"
        class="bg-blue-600 text-white px-4 py-2 rounded">
        Edit Profil
      </button>

      <button onclick="logout()"
        class="bg-red-600 text-white px-4 py-2 rounded">
        Logout
      </button>
    </div>

  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {

  const email = localStorage.getItem("email") || "-";
  const role = localStorage.getItem("role") || "siswa";

  document.getElementById("emailDisplay").textContent = email;
  document.getElementById("roleDisplay").textContent = role;

  if (role === "admin") {
    document.getElementById("adminSection").classList.remove("hidden");

    // Hitung statistik
    const users = JSON.parse(localStorage.getItem("userData")) || [];
    const materi = JSON.parse(localStorage.getItem("materiData")) || [];
    const presensi = JSON.parse(localStorage.getItem("presensiData")) || [];

    document.getElementById("totalUser").textContent = users.length;
    document.getElementById("totalMateri").textContent = materi.length;
    document.getElementById("totalPresensi").textContent = presensi.length;
  }

  document.getElementById("editProfileBtn").addEventListener("click", function() {
    alert("Fitur edit profil akan dikembangkan selanjutnya.");
  });

});
</script>

<script src="assets/js/auth.js"></script>

</body>
</html>
