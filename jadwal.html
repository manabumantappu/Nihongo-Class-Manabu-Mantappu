<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Jadwal</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100">

<!-- ðŸ” GUARD PALING ATAS -->
<script src="assets/js/guard.js"></script>

<!-- ðŸ§­ NAVBAR GLOBAL -->
<script src="assets/js/navbar.js"></script>

<div class="max-w-6xl mx-auto p-6 mt-6">
  <h1 class="text-xl font-semibold mb-6">Jadwal Kelas</h1>

  <div class="overflow-x-auto bg-white rounded-xl shadow">
    <table class="min-w-full table-fixed text-sm">
      
      <thead class="bg-gray-100">
        <tr>
          <th class="p-3 text-left w-1/4">Hari</th>
          <th class="p-3 text-center w-1/4">Jam</th>
          <th class="p-3 text-center w-1/4">Level</th>
          <th class="p-3 text-center w-1/4">Pengajar</th>
        </tr>
      </thead>

      <tbody id="jadwalBody" class="divide-y divide-gray-200">
        <!-- Data Firebase akan masuk di sini -->
      </tbody>

    </table>
  </div>
</div>


<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { 
  getFirestore, 
  collection, 
  getDocs 
} from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

// ================= FIREBASE CONFIG =================
const firebaseConfig = {
  apiKey: "AIzaSyDWe_8KQh5J5gzgKYDWnzNKiw-y1Vj3908",
  authDomain: "jp-nihongo-class.firebaseapp.com",
  projectId: "jp-nihongo-class",
  storageBucket: "jp-nihongo-class.firebasestorage.app",
  messagingSenderId: "102563702284",
  appId: "1:102563702284:web:9a5166a4f7450127647029"
};

// ================= INIT =================
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// âš ï¸ HARUS sama persis dengan nama collection di Firestore
const jadwalRef = collection(db, "Jadwal");

// ================= URUTAN HARI =================
const urutanHari = {
  "Senin": 1,
  "Selasa": 2,
  "Rabu": 3,
  "Kamis": 4,
  "Jumat": 5,
  "Sabtu": 6,
  "Minggu": 7
};

// ================= LOAD DATA =================
async function loadJadwal() {
  try {
    const snapshot = await getDocs(jadwalRef);
    const tbody = document.getElementById("jadwalBody");

    if (!tbody) return;

    let dataList = [];

    snapshot.forEach((doc) => {
      const data = doc.data();
      dataList.push(data);
    });

    // Sort berdasarkan urutan hari
    dataList.sort((a, b) => {
      return (urutanHari[a.hari] || 99) - (urutanHari[b.hari] || 99);
    });

    tbody.innerHTML = "";

    dataList.forEach((data) => {
      tbody.innerHTML += `
        <tr class="border-b hover:bg-gray-50">
          <td class="p-3">${data.hari || "-"}</td>
          <td class="p-3">${data.jam || "-"}</td>
          <td class="p-3">${data.level || "-"}</td>
          <td class="p-3">${data.pengajar || "-"}</td>
        </tr>
      `;
    });

  } catch (error) {
    console.error("Error load jadwal:", error);
  }
}

loadJadwal();
</script>


<!-- ðŸ”‘ AUTH (LOGOUT) -->
<script src="assets/js/auth.js"></script>

</body>
</html>
